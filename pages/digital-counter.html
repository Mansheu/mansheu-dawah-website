<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000">
    <title>Digital Dhikr Counter - Mansheu Dawah</title>
    <meta name="description" content="Keep track of your daily dhikr with our beautiful, easy-to-use digital counter. Track SubhanAllah, Alhamdulillah, Allahu Akbar and more.">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/pages.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../assets/images/favicon.svg">
    <link rel="alternate icon" href="../assets/images/favicon.ico">
    
    
</head>

<body class="counter-page">
    <!-- Header -->
    <div class="menu__wrapper">
        <div class="menu__bar">
            <a href="../index.html" title="Mansheu Dawah">
                <div class="logo">
                    <img src="../assets/images/logo.png" alt="Mansheu Dawah Logo" width="150" height="auto">
                </div>
            </a>
            <ul class="navigation">
                <li><a href="articles.html">
                    <span class="nav-title">Read</span>
                    <span class="nav-desc">Articles & written features</span>
                </a></li>
                <li><a href="videos.html">
                    <span class="nav-title">Watch</span>
                    <span class="nav-desc">Talks, clips & films</span>
                </a></li>
                <li><a href="learn.html">
                    <span class="nav-title">Learn</span>
                    <span class="nav-desc">Guides, lessons & courses</span>
                </a></li>
                <li><a href="infographics.html">
                    <span class="nav-title">Infographics</span>
                    <span class="nav-desc">Visual explainers & briefs</span>
                </a></li>
                <li><a href="about.html">
                    <span class="nav-title">About</span>
                    <span class="nav-desc">Our mission & vision</span>
                </a></li>
                <li class="nav-cta"><a href="digital-counter.html" class="btn btn-primary">Digital Counter</a></li>
            </ul>
            <div class="nav-actions">
                <div class="nav-controls">
                    <a href="search.html" class="nav-search" aria-label="Search the site">
                        <i class="fas fa-search" aria-hidden="true"></i>
                    </a>
                    <button class="menu-icon" aria-label="Toggle menu" aria-expanded="false">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
                <div class="nav-cta">
                    <a href="digital-counter.html" class="btn btn-primary">Digital Counter</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Top Search -->
    <div class="top-search">
        <div class="container">
            <form class="search-form global-search-form" role="search">
                <input type="text" class="search-input" placeholder="Search articles, dhikr, duas, and more..." aria-label="Search the site">
                <button type="submit" class="btn btn-primary search-btn" aria-label="Search">
                    <i class="fas fa-search"></i>
                </button>
            </form>
        </div>
    </div>

    <main id="main-content">
        <!-- Hero Section -->
        <section class="counter-hero">
            <div class="container">
                <h1>Digital Dhikr Counter</h1>
                <p>Keep track of your daily remembrance of Allah with our beautiful, easy-to-use counter</p>
            </div>
        </section>

        <!-- How to Use CTA -->
        <div class="counter-guide-cta">
            <a href="#counter-guide" class="btn guide-btn">
                <i class="fas fa-lightbulb"></i>
                How to Use
            </a>
        </div>

        <!-- Counter Section -->
        <section class="counter-main">
            <div class="container">
                <!-- Presets Section -->
                <div class="presets-section">
                    <h2 class="presets-title">Quick Presets</h2>
                    <p class="presets-subtitle">Load common dhikr routines with one click</p>
                    <div class="presets-grid">
                        <button class="preset-btn" onclick="loadPreset('after-prayer')">
                            <i class="fas fa-mosque"></i> After Prayer
                            <span class="preset-label">Tasbih (33+33+34)</span>
                        </button>
                        <button class="preset-btn" onclick="loadPreset('before-sleep')">
                            <i class="fas fa-moon"></i> Before Sleep
                            <span class="preset-label">Tasbih + Ayat al-Kursi</span>
                        </button>
                        <button class="preset-btn" onclick="loadPreset('istighfar-100')">
                            <i class="fas fa-heart"></i> 100 Istighfar
                            <span class="preset-label">Seeking forgiveness</span>
                        </button>
                        <button class="preset-btn" onclick="loadPreset('morning-evening')">
                            <i class="fas fa-sun"></i> Morning/Evening
                            <span class="preset-label">Daily adhkar</span>
                        </button>
                    </div>
                </div>

                <!-- Custom Counter Section -->
                <div class="custom-counter-section">
                    <div class="counter-actions">
                        <button class="add-counter-btn" onclick="openCustomCounterModal()">
                            <i class="fas fa-plus-circle"></i> Add Custom Counter
                        </button>
                        <button class="reset-to-default-btn" onclick="resetToDefault()">
                            <i class="fas fa-undo"></i> Reset to Default
                        </button>
                    </div>
                </div>

                <!-- Default Counters -->
                <div class="default-counters" id="default-counters">
                    <div class="counter-grid">
                    <!-- SubhanAllah Counter -->
                    <div class="counter-card" id="subhanallah-card">
                        <div class="counter-title">SubhanAllah</div>
                        <div class="counter-arabic">سُبْحَانَ ٱللَّٰهِ</div>
                        
                        <div class="progress-circle-container" onclick="incrementCounter('subhanallah')">
                            <svg class="progress-circle" width="200" height="200" viewBox="0 0 200 200">
                                <defs>
                                    <linearGradient id="gradient-subhanallah" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#0f5bb5;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#66b3ff;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <circle class="progress-circle-bg" cx="100" cy="100" r="85"></circle>
                                <circle class="progress-circle-progress" 
                                        cx="100" cy="100" r="85" 
                                        id="subhanallah-progress"
                                        stroke="url(#gradient-subhanallah)"
                                        stroke-dasharray="534.07" 
                                        stroke-dashoffset="534.07"></circle>
                            </svg>
                            <div class="progress-text">
                                <div class="count-display" id="subhanallah-count">0</div>
                                <div class="target-display">/ 33</div>
                            </div>
                        </div>
                        
                        <div class="counter-controls">
                            <button class="counter-btn increment" onclick="incrementCounter('subhanallah')">
                                <i class="fas fa-hand-pointer"></i>
                            </button>
                            <button class="counter-btn reset" onclick="resetCounter('subhanallah')">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Alhamdulillah Counter -->
                    <div class="counter-card" id="alhamdulillah-card">
                        <div class="counter-title">Alhamdulillah</div>
                        <div class="counter-arabic">ٱلْحَمْدُ لِلَّٰهِ</div>
                        
                        <div class="progress-circle-container" onclick="incrementCounter('alhamdulillah')">
                            <svg class="progress-circle" width="200" height="200" viewBox="0 0 200 200">
                                <defs>
                                    <linearGradient id="gradient-alhamdulillah" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#0f5bb5;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#66b3ff;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <circle class="progress-circle-bg" cx="100" cy="100" r="85"></circle>
                                <circle class="progress-circle-progress" 
                                        cx="100" cy="100" r="85" 
                                        id="alhamdulillah-progress"
                                        stroke="url(#gradient-alhamdulillah)"
                                        stroke-dasharray="534.07" 
                                        stroke-dashoffset="534.07"></circle>
                            </svg>
                            <div class="progress-text">
                                <div class="count-display" id="alhamdulillah-count">0</div>
                                <div class="target-display">/ 33</div>
                            </div>
                        </div>
                        
                        <div class="counter-controls">
                            <button class="counter-btn increment" onclick="incrementCounter('alhamdulillah')">
                                <i class="fas fa-hand-pointer"></i>
                            </button>
                            <button class="counter-btn reset" onclick="resetCounter('alhamdulillah')">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Allahu Akbar Counter -->
                    <div class="counter-card" id="allahu-akbar-card">
                        <div class="counter-title">Allahu Akbar</div>
                        <div class="counter-arabic">ٱللَّٰهُ أَكْبَرُ</div>
                        
                        <div class="progress-circle-container" onclick="incrementCounter('allahu-akbar')">
                            <svg class="progress-circle" width="200" height="200" viewBox="0 0 200 200">
                                <defs>
                                    <linearGradient id="gradient-allahu-akbar" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#0f5bb5;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#66b3ff;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <circle class="progress-circle-bg" cx="100" cy="100" r="85"></circle>
                                <circle class="progress-circle-progress" 
                                        cx="100" cy="100" r="85" 
                                        id="allahu-akbar-progress"
                                        stroke="url(#gradient-allahu-akbar)"
                                        stroke-dasharray="534.07" 
                                        stroke-dashoffset="534.07"></circle>
                            </svg>
                            <div class="progress-text">
                                <div class="count-display" id="allahu-akbar-count">0</div>
                                <div class="target-display">/ 34</div>
                            </div>
                        </div>
                        
                        <div class="counter-controls">
                            <button class="counter-btn increment" onclick="incrementCounter('allahu-akbar')">
                                <i class="fas fa-hand-pointer"></i>
                            </button>
                            <button class="counter-btn reset" onclick="resetCounter('allahu-akbar')">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                    </div>
                </div>
                <!-- End of Default Counters -->

                <!-- Custom Counters Grid -->
                <div class="counter-grid" id="counter-grid"></div>

                <!-- Total Section -->
                <div class="total-section">
                    <div class="total-label">Total Dhikr Today</div>
                    <div class="total-count" id="total-count">0</div>
                    <button class="reset-all-btn" onclick="resetAllCounters()">
                        <i class="fas fa-sync-alt"></i> Reset All Counters
                    </button>
                </div>
            </div>
        </section>

        <!-- How to Use Section -->
        <section class="counter-guide" id="counter-guide" aria-label="How to use the digital counter">
            <div class="container">
                <div class="counter-guide-header">
                    <h2>How to Make the Most of Your Dhikr</h2>
                    <p>Set a sincere intention, pick your routine, and let the counter keep pace with your remembrance.</p>
                </div>
                <div class="counter-guide-grid">
                    <article class="guide-card">
                        <h3>1. Choose Your Focus</h3>
                        <p>Select a preset or load your own sequence, then tap the circle to count each tasbih.</p>
                        <ul class="guide-list">
                            <li>Use presets for After Salah, Morning/Evening, and more.</li>
                            <li>Set personal targets for unique dhikr goals.</li>
                            <li>Watch the circle fill as you progress.</li>
                        </ul>
                    </article>
                    <article class="guide-card guide-card--light">
                        <h3>2. Track, Reset & Reflect</h3>
                        <p>Increment with a tap, reset with assurance, and save totals locally for the next session.</p>
                        <ul class="guide-list">
                            <li>Use the reset buttons to restart any counter.</li>
                            <li>Create custom counters for family, classes, or events.</li>
                            <li>See the total tally update across every dhikr.</li>
                        </ul>
                    </article>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-moon"></i>
                        <span>Mansheu Dawah</span>
                    </div>
                    <p class="footer-description">
                        A dawah initiative dedicated to connecting hearts to Allah through authentic Islamic knowledge, 
                        spiritual guidance, and community support.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="social-link" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="social-link" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Dhikr Collections</h3>
                    <ul class="footer-links">
                        <li><a href="morning-adhkar.html">Morning Adhkar</a></li>
                        <li><a href="evening-adhkar.html">Evening Adhkar</a></li>
                        <li><a href="after-salah.html">After Salah</a></li>
                        <li><a href="names-of-allah.html">Names of Allah</a></li>
                        <li><a href="quranic-duas.html">Quranic Du'as</a></li>
                        <li><a href="sunnah-duas.html">Sunnah Du'as</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="articles.html">Articles</a></li>
                        <li><a href="dhikr-dua.html">Dhikr & Du'a</a></li>
                        <li><a href="digital-counter.html">Digital Counter</a></li>
                        <li><a href="about.html">About Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Contact Info</h3>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>info@mansheudawah.com</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>+44 (0)7XXX XXX XXX</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>United Kingdom</span>
                        </div>
                    </div>
                </div>

                <div class="footer-section footer-search">
                    <h3 class="footer-title">Search the Site</h3>
                    <form class="search-form global-search-form" role="search">
                        <input type="text" class="search-input" placeholder="Search articles, dhikr, duas, and more..." aria-label="Search the site">
                        <button type="submit" class="btn btn-primary search-btn" aria-label="Search">
                            <i class="fas fa-search"></i>
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">
                    <p>&copy; 2025 Mansheu Dawah. All rights reserved. | A dawah initiative to connect creation to The Creator.</p>
                </div>
                <div class="footer-legal">
                    <a href="privacy.html">Privacy Policy</a>
                    <a href="terms.html">Terms of Service</a>
                    <a href="contact.html">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Custom Counter Modal -->
    <div class="modal" id="customCounterModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Custom Counter</h2>
                <button class="modal-close" onclick="closeCustomCounterModal()">&times;</button>
            </div>
            <form id="customCounterForm" onsubmit="addCustomCounter(event)">
                <div class="form-group">
                    <label class="form-label" for="dhikrName">Dhikr Name</label>
                    <input type="text" id="dhikrName" class="form-input" placeholder="e.g., La ilaha illallah" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="dhikrArabic">Arabic Text (Optional)</label>
                    <input type="text" id="dhikrArabic" class="form-input" placeholder="e.g., لَا إِلَٰهَ إِلَّا ٱللَّٰهُ">
                </div>
                <div class="form-group">
                    <label class="form-label" for="dhikrTarget">Target Count</label>
                    <input type="number" id="dhikrTarget" class="form-input" placeholder="e.g., 100" min="1" required>
                </div>
                <button type="submit" class="form-submit">
                    <i class="fas fa-check"></i> Create Counter
                </button>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../assets/js/theme.js"></script>
    <script src="../assets/js/main.js"></script>
    <script>
        // Enhanced Dhikr Counter with Custom Counters and Presets
        let dhikrCounters = {
            'subhanallah': { count: 0, target: 33, name: 'SubhanAllah', arabic: 'سُبْحَانَ ٱللَّٰهِ', isDefault: true },
            'alhamdulillah': { count: 0, target: 33, name: 'Alhamdulillah', arabic: 'ٱلْحَمْدُ لِلَّٰهِ', isDefault: true },
            'allahu-akbar': { count: 0, target: 34, name: 'Allahu Akbar', arabic: 'ٱللَّٰهُ أَكْبَرُ', isDefault: true }
        };

        let customCounters = [];
        
        // Presets configuration
        const presets = {
            'after-prayer': [
                { name: 'SubhanAllah', arabic: 'سُبْحَانَ ٱللَّٰهِ', target: 33 },
                { name: 'Alhamdulillah', arabic: 'ٱلْحَمْدُ لِلَّٰهِ', target: 33 },
                { name: 'Allahu Akbar', arabic: 'ٱللَّٰهُ أَكْبَرُ', target: 34 }
            ],
            'before-sleep': [
                { name: 'SubhanAllah', arabic: 'سُبْحَانَ ٱللَّٰهِ', target: 33 },
                { name: 'Alhamdulillah', arabic: 'ٱلْحَمْدُ لِلَّٰهِ', target: 33 },
                { name: 'Allahu Akbar', arabic: 'ٱللَّٰهُ أَكْبَرُ', target: 34 },
                { name: 'Ayat al-Kursi', arabic: 'آيَةُ الْكُرْسِيِّ', target: 1 }
            ],
            'istighfar-100': [
                { name: 'Astaghfirullah', arabic: 'أَسْتَغْفِرُ ٱللَّٰهَ', target: 100 }
            ],
            'morning-evening': [
                { name: 'Ayat al-Kursi', arabic: 'آيَةُ الْكُرْسِيِّ', target: 1 },
                { name: 'Al-Ikhlas', arabic: 'قُلْ هُوَ ٱللَّٰهُ أَحَدٌ', target: 3 },
                { name: 'Al-Falaq', arabic: 'قُلْ أَعُوذُ بِرَبِّ ٱلْفَلَقِ', target: 3 },
                { name: 'An-Nas', arabic: 'قُلْ أَعُوذُ بِرَبِّ ٱلنَّاسِ', target: 3 }
            ]
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadCountersFromStorage();
            loadCustomCounters();
            updateAllDisplays();
            renderCustomCounters();
            updateDefaultCountersVisibility();
        });

        // Update visibility of default counters
        function updateDefaultCountersVisibility() {
            const defaultCountersContainer = document.getElementById('default-counters');
            if (customCounters.length > 0) {
                defaultCountersContainer.classList.add('hidden');
            } else {
                defaultCountersContainer.classList.remove('hidden');
            }
        }

        // Reset to default counters
        function resetToDefault() {
            if (customCounters.length === 0) {
                return;
            }
            
            // Clear custom counters
            customCounters = [];
            
            // Reset default counters
            Object.keys(dhikrCounters).forEach(key => {
                dhikrCounters[key].count = 0;
                const card = document.getElementById(`${key}-card`);
                if (card) card.classList.remove('completed');
            });
            
            saveCountersToStorage();
            saveCustomCounters();
            renderCustomCounters();
            updateAllDisplays();
            updateDefaultCountersVisibility();
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(30);
            }
        }

        // Load preset
        function loadPreset(presetName) {
            if (!presets[presetName]) return;
            
            // Clear custom counters
            customCounters = [];
            
            // Reset default counters
            Object.keys(dhikrCounters).forEach(key => {
                dhikrCounters[key].count = 0;
            });
            
            // Add preset counters as custom
            presets[presetName].forEach(preset => {
                const id = 'custom-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                customCounters.push({
                    id: id,
                    name: preset.name,
                    arabic: preset.arabic,
                    target: preset.target,
                    count: 0
                });
            });
            
            saveCountersToStorage();
            saveCustomCounters();
            renderCustomCounters();
            updateAllDisplays();
            updateDefaultCountersVisibility();
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        // Custom Counter Modal Functions
        function openCustomCounterModal() {
            document.getElementById('customCounterModal').classList.add('active');
            document.getElementById('dhikrName').focus();
        }

        function closeCustomCounterModal() {
            document.getElementById('customCounterModal').classList.remove('active');
            document.getElementById('customCounterForm').reset();
        }

        // Add custom counter
        function addCustomCounter(event) {
            event.preventDefault();
            
            const name = document.getElementById('dhikrName').value.trim();
            const arabic = document.getElementById('dhikrArabic').value.trim();
            const target = parseInt(document.getElementById('dhikrTarget').value);
            
            if (!name || !target) return;
            
            const id = 'custom-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
            
            customCounters.push({
                id: id,
                name: name,
                arabic: arabic || '',
                target: target,
                count: 0
            });
            
            saveCustomCounters();
            renderCustomCounters();
            updateDefaultCountersVisibility();
            closeCustomCounterModal();
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(30);
            }
        }

        // Delete custom counter
        function deleteCustomCounter(id) {
            customCounters = customCounters.filter(c => c.id !== id);
            saveCustomCounters();
            renderCustomCounters();
            updateDefaultCountersVisibility();
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(20);
            }
        }

        // Render custom counters
        function renderCustomCounters() {
            const grid = document.getElementById('counter-grid');
            
            // Remove existing custom counter cards
            const existingCustom = grid.querySelectorAll('.counter-card[data-custom]');
            existingCustom.forEach(card => card.remove());
            
            // Add custom counters
            customCounters.forEach(counter => {
                const card = createCustomCounterCard(counter);
                grid.appendChild(card);
            });
            
            updateAllDisplays();
        }

        // Create custom counter card
        function createCustomCounterCard(counter) {
            const card = document.createElement('div');
            card.className = 'counter-card';
            card.id = `${counter.id}-card`;
            card.setAttribute('data-custom', 'true');
            
            const isCompleted = counter.count >= counter.target;
            if (isCompleted) {
                card.classList.add('completed');
            }
            
            card.innerHTML = `
                <button class="delete-btn" onclick="deleteCustomCounter('${counter.id}')">
                    <i class="fas fa-trash"></i> Delete
                </button>
                <div class="counter-title">${counter.name}</div>
                ${counter.arabic ? `<div class="counter-arabic">${counter.arabic}</div>` : ''}
                
                <div class="progress-circle-container" onclick="incrementCustomCounter('${counter.id}')">
                    <svg class="progress-circle" width="200" height="200" viewBox="0 0 200 200">
                        <defs>
                            <linearGradient id="gradient-${counter.id}" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff7a00;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ffb347;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle class="progress-circle-bg" cx="100" cy="100" r="85"></circle>
                        <circle class="progress-circle-progress" 
                                cx="100" cy="100" r="85" 
                                id="${counter.id}-progress"
                                stroke="url(#gradient-${counter.id})"
                                stroke-dasharray="534.07" 
                                stroke-dashoffset="534.07"></circle>
                    </svg>
                    <div class="progress-text">
                        <div class="count-display" id="${counter.id}-count">${counter.count}</div>
                        <div class="target-display">/ ${counter.target}</div>
                    </div>
                </div>
                
                <div class="counter-controls">
                    <button class="counter-btn increment" onclick="incrementCustomCounter('${counter.id}')">
                        <i class="fas fa-hand-pointer"></i>
                    </button>
                    <button class="counter-btn reset" onclick="resetCustomCounter('${counter.id}')">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            `;
            
            return card;
        }

        // Increment custom counter
        function incrementCustomCounter(id) {
            const counter = customCounters.find(c => c.id === id);
            if (!counter) return;
            
            counter.count++;
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }
            
            // Visual feedback
            const card = document.getElementById(`${id}-card`);
            card.classList.add('celebrating');
            setTimeout(() => card.classList.remove('celebrating'), 600);
            
            // Check if target reached
            if (counter.count === counter.target) {
                card.classList.add('completed');
                showCelebration();
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100, 50, 100]);
                }
            }
            
            saveCustomCounters();
            updateCustomCounterDisplay(counter);
            updateTotalCount();
        }

        // Reset custom counter
        function resetCustomCounter(id) {
            const counter = customCounters.find(c => c.id === id);
            if (!counter) return;
            
            if (!confirm(`Are you sure you want to reset ${counter.name}?`)) {
                return;
            }
            
            counter.count = 0;
            const card = document.getElementById(`${id}-card`);
            card.classList.remove('completed');
            
            saveCustomCounters();
            updateCustomCounterDisplay(counter);
            updateTotalCount();
            
            if (navigator.vibrate) {
                navigator.vibrate(20);
            }
        }

        // Update custom counter display
        function updateCustomCounterDisplay(counter) {
            const countElement = document.getElementById(`${counter.id}-count`);
            if (countElement) {
                countElement.textContent = counter.count;
            }
            
            const progressCircle = document.getElementById(`${counter.id}-progress`);
            if (progressCircle) {
                const percentage = (counter.count / counter.target) * 100;
                const circumference = 534.07;
                const offset = circumference - (percentage / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
            }
        }

        // Save custom counters
        function saveCustomCounters() {
            localStorage.setItem('customDhikrCounters', JSON.stringify(customCounters));
        }

        // Load custom counters
        function loadCustomCounters() {
            const saved = localStorage.getItem('customDhikrCounters');
            if (saved) {
                customCounters = JSON.parse(saved);
            }
        }

        // Close modal on outside click
        document.getElementById('customCounterModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCustomCounterModal();
            }
        });

        function incrementCounter(type) {
            if (dhikrCounters[type]) {
                dhikrCounters[type].count++;
                
                // Haptic feedback for mobile devices
                if (navigator.vibrate) {
                    navigator.vibrate(10);
                }
                
                // Visual feedback
                const card = document.getElementById(`${type}-card`);
                card.classList.add('celebrating');
                setTimeout(() => card.classList.remove('celebrating'), 600);
                
                // Check if target reached
                if (dhikrCounters[type].count === dhikrCounters[type].target) {
                    markAsCompleted(type);
                    showCelebration();
                    // Stronger vibration for completion
                    if (navigator.vibrate) {
                        navigator.vibrate([100, 50, 100, 50, 100]);
                    }
                }
                
                saveCountersToStorage();
                updateAllDisplays();
            }
        }

        function resetCounter(type) {
            if (dhikrCounters[type]) {
                if (!confirm('Are you sure you want to reset this counter?')) {
                    return;
                }
                
                dhikrCounters[type].count = 0;
                const card = document.getElementById(`${type}-card`);
                card.classList.remove('completed');
                saveCountersToStorage();
                updateAllDisplays();
                
                // Light haptic feedback
                if (navigator.vibrate) {
                    navigator.vibrate(20);
                }
            }
        }

        function resetAllCounters() {
            if (!confirm('Are you sure you want to reset ALL counters? This cannot be undone.')) {
                return;
            }
            
            Object.keys(dhikrCounters).forEach(type => {
                dhikrCounters[type].count = 0;
                const card = document.getElementById(`${type}-card`);
                if (card) card.classList.remove('completed');
            });
            
            // Reset custom counters too
            customCounters.forEach(counter => {
                counter.count = 0;
                const card = document.getElementById(`${counter.id}-card`);
                if (card) card.classList.remove('completed');
            });
            
            saveCountersToStorage();
            saveCustomCounters();
            updateAllDisplays();
            renderCustomCounters();
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(30);
            }
        }

        function updateAllDisplays() {
            Object.keys(dhikrCounters).forEach(type => {
                updateCountDisplay(type);
                updateProgressCircle(type);
            });
            updateTotalCount();
        }

        function updateCountDisplay(type) {
            const countElement = document.getElementById(`${type}-count`);
            if (countElement) {
                countElement.textContent = dhikrCounters[type].count;
            }
        }

        function updateProgressCircle(type) {
            const progressCircle = document.getElementById(`${type}-progress`);
            if (progressCircle) {
                const percentage = (dhikrCounters[type].count / dhikrCounters[type].target) * 100;
                const circumference = 534.07; // 2 * PI * radius (85)
                const offset = circumference - (percentage / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
            }
        }

        function updateTotalCount() {
            const totalElement = document.getElementById('total-count');
            if (totalElement) {
                const defaultTotal = Object.values(dhikrCounters).reduce((sum, counter) => sum + counter.count, 0);
                const customTotal = customCounters.reduce((sum, counter) => sum + counter.count, 0);
                totalElement.textContent = defaultTotal + customTotal;
            }
        }

        function markAsCompleted(type) {
            const card = document.getElementById(`${type}-card`);
            card.classList.add('completed');
        }

        function showCelebration() {
            // Create confetti effect
            const confettiContainer = document.createElement('div');
            confettiContainer.className = 'confetti-container';
            document.body.appendChild(confettiContainer);
            
            const colors = ['#0f5bb5', '#1e90ff', '#66b3ff', '#ff7a00', '#ffb347', '#f0f0f0'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confettiContainer.appendChild(confetti);
            }
            
            setTimeout(() => {
                document.body.removeChild(confettiContainer);
            }, 3000);
        }

        function saveCountersToStorage() {
            localStorage.setItem('dhikrCounters', JSON.stringify(dhikrCounters));
        }

        function loadCountersFromStorage() {
            const saved = localStorage.getItem('dhikrCounters');
            if (saved) {
                dhikrCounters = JSON.parse(saved);
                // Check which counters are completed
                Object.keys(dhikrCounters).forEach(type => {
                    if (dhikrCounters[type].count >= dhikrCounters[type].target) {
                        markAsCompleted(type);
                    }
                });
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.target.matches('input, textarea')) return;
            
            switch(event.key) {
                case '1':
                    event.preventDefault();
                    incrementCounter('subhanallah');
                    break;
                case '2':
                    event.preventDefault();
                    incrementCounter('alhamdulillah');
                    break;
                case '3':
                    event.preventDefault();
                    incrementCounter('allahu-akbar');
                    break;
                case ' ':
                    event.preventDefault();
                    // Space increments the first incomplete counter
                    const incomplete = Object.keys(dhikrCounters).find(
                        type => dhikrCounters[type].count < dhikrCounters[type].target
                    );
                    if (incomplete) incrementCounter(incomplete);
                    break;
            }
        });
    </script>
</body>
</html>
